# Plot3D Usage Guide

The `Plot3D` class in RebelCALC provides powerful 3D visualization capabilities for scientific and engineering data. This guide explains how to use the class to create interactive 3D plots.

## Basic Usage

Here's a simple example of creating a 3D surface plot:

```cpp
#include "../src/visualization/plot3d.h"
#include <cmath>

using namespace RebelCalc::Visualization;

// Function to plot
double myFunction(double x, double y) {
    return std::sin(x) * std::cos(y);
}

int main() {
    // Create a 3D plot
    Plot3D plot("My 3D Plot");
    
    // Set labels
    plot.setXLabel("X Axis");
    plot.setYLabel("Y Axis");
    plot.setZLabel("Z Axis");
    
    // Add a surface using a function
    plot.addSurface(myFunction, -3.14, 3.14, -3.14, 3.14, 50, 50, "Sin(x)Cos(y)");
    
    // Show the plot in a browser
    plot.show();
    
    return 0;
}
```

## Plot Customization

The `Plot3D` class provides various methods to customize the appearance of the plot:

```cpp
// Set the background color
plot.setBackgroundColor(Color(240, 240, 240)); // Light gray

// Set the grid color
plot.setGridColor(Color(200, 200, 200));

// Set the text color
plot.setTextColor(Color(50, 50, 50));

// Set the view angles (azimuth and elevation in degrees)
plot.setViewAngles(30.0, 30.0);

// Set the axis ranges
plot.setXRange(-5.0, 5.0);
plot.setYRange(-5.0, 5.0);
plot.setZRange(-2.0, 2.0);

// Show or hide grid, legend, and color bar
plot.setShowGrid(true);
plot.setShowLegend(true);
plot.setShowColorBar(true);
```

## Surface Styles

The `Plot3D` class supports different surface styles:

```cpp
// Get the surface and set its style
DataSeries3D& surface = const_cast<DataSeries3D&>(plot.getSurface(0));

// Solid surface (default)
surface.setSurfaceStyle(SurfaceStyle::SOLID);

// Wireframe
surface.setSurfaceStyle(SurfaceStyle::WIREFRAME);
surface.setWireframeColor(Color(0, 0, 255)); // Blue
surface.setWireframeWidth(2.0);

// Points
surface.setSurfaceStyle(SurfaceStyle::POINTS);
surface.setPointSize(3.0);

// Contour
surface.setSurfaceStyle(SurfaceStyle::CONTOUR);
std::vector<double> contourLevels = {-1.0, -0.5, 0.0, 0.5, 1.0};
surface.setContourLevels(contourLevels);
```

## Color Maps

You can customize the color map for surfaces and scatter plots:

```cpp
// Create a custom color map
std::vector<Color> colorMap = {
    Color(0, 0, 255),   // Blue
    Color(0, 255, 255), // Cyan
    Color(0, 255, 0),   // Green
    Color(255, 255, 0), // Yellow
    Color(255, 0, 0)    // Red
};

// Apply the color map to a surface
surface.setColorMap(colorMap);
```

## Scatter Plots

The `Plot3D` class also supports 3D scatter plots:

```cpp
// Create data for a scatter plot
std::vector<double> x = {1.0, 2.0, 3.0, 4.0, 5.0};
std::vector<double> y = {2.0, 3.0, 4.0, 5.0, 6.0};
std::vector<double> z = {3.0, 4.0, 5.0, 6.0, 7.0};

// Add a scatter plot
plot.addScatter(x, y, z, "My Scatter Plot");

// Get the scatter and set its properties
ScatterSeries3D& scatter = const_cast<ScatterSeries3D&>(plot.getScatter(0));
scatter.setMarkerStyle(MarkerStyle::CIRCLE);
scatter.setMarkerSize(5.0);
scatter.setMarkerColor(Color(255, 0, 0)); // Red

// Color points by Z value
scatter.setColorByZ(true);
scatter.setColorMap(colorMap);
```

## Saving Plots

You can save plots to HTML files:

```cpp
// Save the plot to an HTML file
plot.save("my_plot.html");

// You can also specify the width and height
plot.save("my_plot.html", 800, 600);
```

## Interactive Features

The HTML plots generated by `Plot3D` are interactive. When viewed in a web browser, you can:

- Rotate the plot by clicking and dragging
- Zoom in and out using the scroll wheel
- Pan the plot by holding Shift while dragging
- Reset the view by double-clicking
- Show or hide data series by clicking on the legend
- Hover over data points to see tooltips with values

## Advanced Example

Here's a more advanced example that demonstrates multiple surfaces with different styles:

```cpp
#include "../src/visualization/plot3d.h"
#include <cmath>

using namespace RebelCalc::Visualization;

// Function to generate a 3D surface
double sinc(double x, double y) {
    double r = std::sqrt(x*x + y*y);
    if (r < 1e-10) {
        return 1.0;
    }
    return std::sin(r) / r;
}

int main() {
    // Create a plot with different surface styles
    Plot3D plot("Surface Style Demo");
    
    // Add surfaces with different styles
    size_t solidIdx = plot.addSurface(sinc, -8.0, 8.0, -8.0, 8.0, 30, 30, "Solid");
    size_t wireframeIdx = plot.addSurface(sinc, -8.0, 8.0, -8.0, 8.0, 30, 30, "Wireframe");
    size_t pointsIdx = plot.addSurface(sinc, -8.0, 8.0, -8.0, 8.0, 30, 30, "Points");
    size_t contourIdx = plot.addSurface(sinc, -8.0, 8.0, -8.0, 8.0, 30, 30, "Contour");
    
    // Set different styles
    const_cast<DataSeries3D&>(plot.getSurface(wireframeIdx)).setSurfaceStyle(SurfaceStyle::WIREFRAME);
    const_cast<DataSeries3D&>(plot.getSurface(pointsIdx)).setSurfaceStyle(SurfaceStyle::POINTS);
    const_cast<DataSeries3D&>(plot.getSurface(contourIdx)).setSurfaceStyle(SurfaceStyle::CONTOUR);
    
    // Set contour levels
    std::vector<double> contourLevels;
    for (double level = -0.2; level <= 1.0; level += 0.1) {
        contourLevels.push_back(level);
    }
    const_cast<DataSeries3D&>(plot.getSurface(contourIdx)).setContourLevels(contourLevels);
    
    // Save and show the plot
    plot.save("surface_style_demo.html");
    plot.show();
    
    return 0;
}
```

## API Reference

### Plot3D Class

#### Constructors

- `Plot3D(const std::string& title = "")`: Create a new 3D plot with the given title.

#### Surface Methods

- `size_t addSurface(const DataSeries3D& series)`: Add a surface data series to the plot.
- `size_t addSurface(std::function<double(double, double)> func, double xMin, double xMax, double yMin, double yMax, size_t xPoints = 50, size_t yPoints = 50, const std::string& name = "")`: Add a surface data series to the plot with a function.
- `const DataSeries3D& getSurface(size_t index) const`: Get a surface data series.
- `size_t getSurfaceCount() const`: Get the number of surface data series.

#### Scatter Methods

- `size_t addScatter(const ScatterSeries3D& series)`: Add a scatter data series to the plot.
- `size_t addScatter(const std::vector<double>& x, const std::vector<double>& y, const std::vector<double>& z, const std::string& name = "")`: Add a scatter data series to the plot.
- `const ScatterSeries3D& getScatter(size_t index) const`: Get a scatter data series.
- `size_t getScatterCount() const`: Get the number of scatter data series.

#### Appearance Methods

- `void setTitle(const std::string& title)`: Set the title of the plot.
- `const std::string& getTitle() const`: Get the title of the plot.
- `void setXLabel(const std::string& label)`: Set the x-axis label.
- `const std::string& getXLabel() const`: Get the x-axis label.
- `void setYLabel(const std::string& label)`: Set the y-axis label.
- `const std::string& getYLabel() const`: Get the y-axis label.
- `void setZLabel(const std::string& label)`: Set the z-axis label.
- `const std::string& getZLabel() const`: Get the z-axis label.
- `void setXRange(double min, double max)`: Set the x-axis range.
- `std::pair<double, double> getXRange() const`: Get the x-axis range.
- `void setYRange(double min, double max)`: Set the y-axis range.
- `std::pair<double, double> getYRange() const`: Get the y-axis range.
- `void setZRange(double min, double max)`: Set the z-axis range.
- `std::pair<double, double> getZRange() const`: Get the z-axis range.
- `void setViewAngles(double azimuth, double elevation)`: Set the view angles.
- `std::pair<double, double> getViewAngles() const`: Get the view angles.
- `void setShowGrid(bool show)`: Set whether to show the grid.
- `bool getShowGrid() const`: Get whether to show the grid.
- `void setShowLegend(bool show)`: Set whether to show the legend.
- `bool getShowLegend() const`: Get whether to show the legend.
- `void setShowColorBar(bool show)`: Set whether to show the color bar.
- `bool getShowColorBar() const`: Get whether to show the color bar.
- `void setBackgroundColor(const Color& color)`: Set the background color.
- `const Color& getBackgroundColor() const`: Get the background color.
- `void setGridColor(const Color& color)`: Set the grid color.
- `const Color& getGridColor() const`: Get the grid color.
- `void setTextColor(const Color& color)`: Set the text color.
- `const Color& getTextColor() const`: Get the text color.

#### Output Methods

- `bool save(const std::string& filename, int width = 800, int height = 600) const`: Save the plot to a file.
- `void show(int width = 800, int height = 600) const`: Show the plot in a browser.
- `std::string toHTML(int width = 800, int height = 600) const`: Generate HTML representation of the plot.

### DataSeries3D Class

#### Constructors

- `DataSeries3D(const std::vector<double>& x, const std::vector<double>& y, const std::vector<std::vector<double>>& z, const std::string& name = "")`: Create a new 3D data series with the given data.
- `DataSeries3D(std::function<double(double, double)> func, double xMin, double xMax, double yMin, double yMax, size_t xPoints = 50, size_t yPoints = 50, const std::string& name = "")`: Create a new 3D data series with a function.

#### Data Methods

- `const std::vector<double>& getX() const`: Get the x values.
- `const std::vector<double>& getY() const`: Get the y values.
- `const std::vector<std::vector<double>>& getZ() const`: Get the z values.
- `const std::string& getName() const`: Get the name of the series.

#### Appearance Methods

- `void setSurfaceStyle(SurfaceStyle style)`: Set the surface style.
- `SurfaceStyle getSurfaceStyle() const`: Get the surface style.
- `void setColorMap(const std::vector<Color>& colorMap)`: Set the color map.
- `const std::vector<Color>& getColorMap() const`: Get the color map.
- `void setWireframeColor(const Color& color)`: Set the wireframe color.
- `const Color& getWireframeColor() const`: Get the wireframe color.
- `void setWireframeWidth(double width)`: Set the wireframe width.
- `double getWireframeWidth() const`: Get the wireframe width.
- `void setPointSize(double size)`: Set the point size.
- `double getPointSize() const`: Get the point size.
- `void setContourLevels(const std::vector<double>& levels)`: Set the contour levels.
- `const std::vector<double>& getContourLevels() const`: Get the contour levels.

### ScatterSeries3D Class

#### Constructors

- `ScatterSeries3D(const std::vector<double>& x, const std::vector<double>& y, const std::vector<double>& z, const std::string& name = "")`: Create a new 3D scatter data series with the given data.

#### Data Methods

- `const std::vector<double>& getX() const`: Get the x values.
- `const std::vector<double>& getY() const`: Get the y values.
- `const std::vector<double>& getZ() const`: Get the z values.
- `const std::string& getName() const`: Get the name of the series.

#### Appearance Methods

- `void setMarkerStyle(MarkerStyle style)`: Set the marker style.
- `MarkerStyle getMarkerStyle() const`: Get the marker style.
- `void setMarkerSize(double size)`: Set the marker size.
- `double getMarkerSize() const`: Get the marker size.
- `void setMarkerColor(const Color& color)`: Set the marker color.
- `const Color& getMarkerColor() const`: Get the marker color.
- `void setColorMap(const std::vector<Color>& colorMap)`: Set the color map.
- `const std::vector<Color>& getColorMap() const`: Get the color map.
- `void setColorByZ(bool colorByZ)`: Set whether to color points by Z value.
- `bool getColorByZ() const`: Get whether to color points by Z value.

### Enums

#### SurfaceStyle

- `SurfaceStyle::SOLID`: Solid surface.
- `SurfaceStyle::WIREFRAME`: Wireframe surface.
- `SurfaceStyle::POINTS`: Points surface.
- `SurfaceStyle::CONTOUR`: Contour surface.

#### MarkerStyle

- `MarkerStyle::CIRCLE`: Circle marker.
- `MarkerStyle::SQUARE`: Square marker.
- `MarkerStyle::DIAMOND`: Diamond marker.
- `MarkerStyle::TRIANGLE`: Triangle marker.
- `MarkerStyle::CROSS`: Cross marker.
